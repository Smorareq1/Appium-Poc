# pytest.ini - Archivo de configuración principal
[tool:pytest]
# Directorios donde buscar tests
testpaths = tests

# Patrones de archivos de test
python_files = test_*.py *_test.py

# Patrones de clases de test
python_classes = Test*

# Patrones de funciones de test
python_functions = test_*

# Markers personalizados (evita warnings)
markers =
    smoke: Critical tests that must always pass
    regression: Full regression test suite
    performance: Performance and load tests
    ui: User interface tests
    api: API integration tests
    slow: Tests that take more than 5 seconds
    flaky: Tests that might fail intermittently
    jira: Tests linked to Jira tickets

# Opciones por defecto
addopts =
    -v
    --strict-markers
    --tb=short
    --maxfail=5
    --html=pytest_reports/report.html
    --self-contained-html
    --junit-xml=pytest_reports/junit.xml
    --capture=no

# Filtros de warnings
filterwarnings =
    ignore::DeprecationWarning
    ignore::PendingDeprecationWarning

# Timeout para tests (en segundos)
timeout = 300

# Orden de ejecución (opcional - requiere pytest-order)
# console_output_style = progress

# Logging
log_cli = true
log_cli_level = INFO
log_cli_format = %(asctime)s [%(levelname)8s] %(message)s
log_cli_date_format = %Y-%m-%d %H:%M:%S

# Directorio para logs
log_file = pytest_reports/pytest.log
log_file_level = DEBUG
log_file_format = %(asctime)s [%(levelname)8s] %(filename)s:%(lineno)d %(funcName)s() %(message)s
log_file_date_format = %Y-%m-%d %H:%M:%S